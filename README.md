# Mega.nz Image Search UserScript

## Обзор проекта

Этот проект представляет собой UserScript для браузеров (предназначенный для Violentmonkey или Tampermonkey), который индексирует изображения в учетной записи Mega.nz пользователя и позволяет искать их по визуальному сходству. Он вычисляет перцептивный хеш для каждого изображения, сохраняет эту информацию в локальном хранилище браузера с помощью API Greasemonkey (`GM.*`) и предоставляет пользовательский интерфейс для сканирования папок.

**Ключевые технологии:**

*   **JavaScript:** Основной язык для UserScript.
*   **UserScript Engine:** Разработано для Violentmonkey/Tampermonkey.
*   **GM Functions:** Используется для клиентского хранения индекса изображений (`GM.setValue`, `GM.getValue` и т.д.), что обеспечивает сохранение данных между сессиями.
*   **Перцептивное хеширование:** Реализован алгоритм для создания "отпечатка" изображений, что позволяет осуществлять визуальное сравнение.

## Как установить и запустить

Этот UserScript не "собирается" в традиционном смысле. Чтобы запустить его, вам необходимо:

1.  **Установить менеджер UserScript:** Установите расширение для браузера, такое как [Violentmonkey](https://violentmonkey.github.io/) или [Tampermonkey](https://www.tampermonkey.net/).
2.  **Установить скрипт:**
    *   Создайте новый UserScript в панели управления вашего менеджера.
    *   Скопируйте все содержимое файла `mega_nz.js` в редактор.
    *   Сохраните скрипт.
3.  **Запустить скрипт:**
    *   Перейдите на сайт `https://mega.nz/` или `https://mega.io/`.
    *   Скрипт выполнится автоматически. В правом нижнем углу появится кнопка для запуска сканирования.

## Тестирование и отладка

*   Откройте консоль разработчика в браузере (F12).
*   Скрипт выводит в консоль информацию о своей активности, например, о подключении к базе данных и процессе сканирования.
*   Вы можете вручную взаимодействовать с функциями скрипта через консоль, например:
    *   `window.checkDB()`: для просмотра всех файлов, проиндексированных в данный момент в базе данных. Эта функция выведет в консоль таблицу с последними добавленными записями.
